web 期末專題 — 農產品價格

農產品歷史價格查詢系統 - 專案詳細介紹




概述

這是一個功能完整的農產品價格管理和分析系統，專為追蹤和分析台灣農產品（如小豬、生乳、生羊乳、活雞、白蛋）的歷史價格數據而設計。系統提供直觀的價格新增、查詢與視覺化功能，幫助用戶快速了解農產品價格趨勢。

核心功能
![image](https://github.com/user-attachments/assets/17d529ce-057d-4750-b06e-a2ade1299e76)
1. ➕ 價格資料新增





手動輸入：用戶可輸入指定日期（西元年格式）與農產品價格。



資料驗證：確保價格為正數或空值，日期格式正確（YYYY-MM）。



簡易操作：透過表單快速新增價格資料至資料庫。



即時反饋：新增成功後自動重新整理頁面，顯示最新資料。

2. 🔍 價格查詢

![image](https://github.com/user-attachments/assets/e5aeb60d-e6a9-4d35-ae8c-1cc6f6779833)

日期範圍篩選：支援選擇西元年份與月份範圍進行查詢。



資料表格：以表格形式展示查詢結果，清晰呈現各農產品價格。



無資料提示：當查詢無結果時，顯示「無資料」提示。



預設範圍：預設顯示當前年份的價格資料。



3. 📊 數據視覺化


![image](https://github.com/user-attachments/assets/9c6c72a1-b8c0-422f-afd9-e5cc80547052)



互動式折線圖：使用 Chart.js 繪製各農產品的價格趨勢圖。



多產品比較：同時顯示小豬、生乳、生羊乳、活雞、白蛋的價格變化。



時間軸：根據查詢的日期範圍動態生成 X 軸（日期）。



響應式設計：圖表適配桌面、平板和手機設備。



4. 🛠️ 錯誤處理





輸入驗證：前端和後端雙重驗證，確保年份與月份有效。



友好提示：資料庫錯誤或無效輸入時，顯示清晰的錯誤訊息。



錯誤頁面：專用錯誤頁面引導用戶返回首頁。



技術架構

後端技術棧





Node.js：JavaScript 運行環境，提供高效的服務器端處理。
Express.js：輕量級 Web 框架，處理路由與請求。
SQLite3：輕量級資料庫，儲存農產品價格數據。
EJS：模板引擎，動態生成 HTML 頁面。

前端技術棧





Tailwind CSS：現代化 CSS 框架，提供響應式和美觀的 UI。
Chart.js：專業圖表庫，用於繪製價格趨勢折線圖。
原生 JavaScript：處理前端交互邏輯，如圖表渲染。
HTML5/CSS3：確保網頁結構與樣式的標準化。

數據處理





日期格式：統一使用西元年格式（YYYY-MM），簡化查詢與儲存。



資料驗證：後端檢查價格數值（正數或空值）與日期有效性。



SQL 查詢：高效查詢指定日期範圍的價格資料。

專案結構說明

farmprice/
├── app.js                 # Express 應用主配置
├── package.json          # 依賴包管理
├── product_prices.db     # SQLite 資料庫文件
│   
├── views/
│   ├── index.ejs         # 首頁模板（包含新增、查詢與圖表）
│   └── error.ejs         # 錯誤頁面
├── public/
│   └── css/
│        └── style.css     # 自定義樣式（若有）
│   
│       

主要頁面功能

1. 首頁 (/)





功能概述：

新增農產品價格資料。

查詢指定日期範圍的價格。

顯示價格表格與趨勢折線圖。



特色：



直觀的表單設計，支援西元年與月份選擇。

動態生成的價格表格，無資料時顯示提示。

互動式折線圖，展示價格趨勢。

2. 錯誤頁面 (/error)

功能概述：

顯示輸入錯誤或資料庫錯誤的提示訊息。


提供「返回首頁」連結。



特色：

使用 Tailwind CSS 確保一致的視覺風格。

簡潔的錯誤訊息，方便用戶快速修正。

🔌 API 接口

GET /

功能：查詢指定日期範圍的農產品價格。

參數：


year：起始西元年（例如 2024）。



month：起始月份（1-12）。



Toyear：結束西元年。



Tomonth：結束月份。



返回：EJS 渲染的首頁，包含價格表格與折線圖。

POST /add-price





功能：新增農產品價格資料。



參數：





year：西元年。



month：月份。



piglet_10kg：小豬（10kg）價格。



milk_purchase_ret：生乳收購價。



raw_sheep_milk：生羊乳價格。



live_chicken：活雞價格。



white_egg：白蛋價格。



返回：重定向至首頁，顯示更新後的資料。

安裝與使用

環境要求





Node.js（v14 或以上）



npm 包管理器

安裝步驟





安裝依賴：

npm install express body-parser sqlite3 ejs



啟動服務器：

node app.js



訪問系統：開啟瀏覽器，訪問 http://localhost:5000。

設計特色

UI/UX 設計





現代化介面：使用 Tailwind CSS 提供簡潔、美觀的視覺效果。



響應式布局：適配桌面、平板和手機等多種設備。



直觀導航：表單與表格設計清晰，操作簡單。



視覺反饋：查詢無資料時顯示提示，錯誤時提供引導。

數據呈現


![image](https://github.com/user-attachments/assets/92fb3950-ede3-4553-a732-37933844995e)



折線圖視覺化：使用 Chart.js 展示各農產品的價格趨勢。



表格設計：清晰的欄位標題，價格欄支援空值顯示（-）。



顏色編碼：不同農產品在折線圖中使用對比鮮明的顏色。



即時更新：新增資料後立即反映在表格與圖表中。

數據來源與處理

數據來源





手動輸入：用戶透過表單輸入農產品價格資料。



資料庫儲存：使用 SQLite 儲存結構化數據。

數據處理流程





資料輸入：用戶選擇西元年份與月份，輸入價格。



資料驗證：後端檢查年份、月份有效性，價格為正數或空值。



資料儲存：將資料插入 SQLite 資料庫，日期格式為 YYYY-MM。



資料查詢：根據用戶指定的日期範圍，高效檢索資料。



資料視覺化：將查詢結果渲染為表格與折線圖。

未來改進方向


資料編輯與刪除：新增編輯和刪除價格資料的功能。
資料匯出：支援將查詢結果匯出為 CSV 檔案。
自動資料爬取：整合網頁爬蟲，從公開資料來源（如農業相關網站）自動抓取價格。
統計分析：新增價格統計功能，如最高、最低、平均價格。
分頁功能：對於大量資料，實現表格分頁顯示。
